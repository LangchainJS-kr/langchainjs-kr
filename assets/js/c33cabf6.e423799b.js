"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[3566],{72854:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>r,contentTitle:()=>i,default:()=>h,frontMatter:()=>a,metadata:()=>o,toc:()=>p});var s=n(74848),l=n(28453);const a={sidebar_class_name:"hidden",sidebar_position:1,title:"How to use example selectors"},i=void 0,o={id:"how_to/example_selectors",title:"How to use example selectors",description:"This guide assumes familiarity with the following concepts:",source:"@site/docs/how_to/example_selectors.mdx",sourceDirName:"how_to",slug:"/how_to/example_selectors",permalink:"/docs/how_to/example_selectors",draft:!1,unlisted:!1,editUrl:"https://langchainjs-kr.site/docs/how_to/example_selectors.mdx",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_class_name:"hidden",sidebar_position:1,title:"How to use example selectors"},sidebar:"tutorialSidebar",previous:{title:"\uc0ac\uc6a9 \uac00\uc774\ub4dc",permalink:"/docs/how_to/"},next:{title:"Installation",permalink:"/docs/how_to/installation"}},r={},p=[{value:"Examples",id:"examples",level:2},{value:"Custom Example Selector",id:"custom-example-selector",level:2},{value:"Use in a Prompt",id:"use-in-a-prompt",level:2},{value:"Example Selector Types",id:"example-selector-types",level:2},{value:"Next steps",id:"next-steps",level:2}];function c(e){const t={a:"a",admonition:"admonition",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(t.admonition,{title:"Prerequisites",type:"info",children:[(0,s.jsx)(t.p,{children:"This guide assumes familiarity with the following concepts:"}),(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.a,{href:"../../docs/concepts/#prompt-templates",children:"Prompt templates"})}),"\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.a,{href:"../../docs/how_to/few_shot_examples",children:"Few-shot examples"})}),"\n"]})]}),"\n",(0,s.jsx)(t.p,{children:"If you have a large number of examples, you may need to select which\nones to include in the prompt. The Example Selector is the class\nresponsible for doing so."}),"\n",(0,s.jsx)(t.p,{children:"The base interface is defined as below:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-typescript",children:"class BaseExampleSelector {\n  addExample(example: Example): Promise<void | string>;\n\n  selectExamples(input_variables: Example): Promise<Example[]>;\n}\n"})}),"\n",(0,s.jsxs)(t.p,{children:["The only method it needs to define is a ",(0,s.jsx)(t.code,{children:"selectExamples"})," method. This\ntakes in the input variables and then returns a list of examples. It is\nup to each specific implementation as to how those examples are\nselected."]}),"\n",(0,s.jsx)(t.p,{children:"LangChain has a few different types of example selectors. For an\noverview of all these types, see the below table."}),"\n",(0,s.jsx)(t.p,{children:"In this guide, we will walk through creating a custom example selector."}),"\n",(0,s.jsx)(t.h2,{id:"examples",children:"Examples"}),"\n",(0,s.jsx)(t.p,{children:"In order to use an example selector, we need to create a list of\nexamples. These should generally be example inputs and outputs. For this\ndemo purpose, let\u2019s imagine we are selecting examples of how to\ntranslate English to Italian."}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-typescript",children:'const examples = [\n  { input: "hi", output: "ciao" },\n  { input: "bye", output: "arrivaderci" },\n  { input: "soccer", output: "calcio" },\n];\n'})}),"\n",(0,s.jsx)(t.h2,{id:"custom-example-selector",children:"Custom Example Selector"}),"\n",(0,s.jsx)(t.p,{children:"Let\u2019s write an example selector that chooses what example to pick based\non the length of the word."}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-typescript",children:'import { BaseExampleSelector } from "@langchain/core/example_selectors";\nimport { Example } from "@langchain/core/prompts";\n\nclass CustomExampleSelector extends BaseExampleSelector {\n  private examples: Example[];\n\n  constructor(examples: Example[]) {\n    super();\n    this.examples = examples;\n  }\n\n  async addExample(example: Example): Promise<void | string> {\n    this.examples.push(example);\n    return;\n  }\n\n  async selectExamples(inputVariables: Example): Promise<Example[]> {\n    // This assumes knowledge that part of the input will be a \'text\' key\n    const newWord = inputVariables.input;\n    const newWordLength = newWord.length;\n\n    // Initialize variables to store the best match and its length difference\n    let bestMatch: Example | null = null;\n    let smallestDiff = Infinity;\n\n    // Iterate through each example\n    for (const example of this.examples) {\n      // Calculate the length difference with the first word of the example\n      const currentDiff = Math.abs(example.input.length - newWordLength);\n\n      // Update the best match if the current one is closer in length\n      if (currentDiff < smallestDiff) {\n        smallestDiff = currentDiff;\n        bestMatch = example;\n      }\n    }\n\n    return bestMatch ? [bestMatch] : [];\n  }\n}\n'})}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-typescript",children:"const exampleSelector = new CustomExampleSelector(examples);\n"})}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-typescript",children:'await exampleSelector.selectExamples({ input: "okay" });\n'})}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-text",children:'[ { input: "bye", output: "arrivaderci" } ]\n'})}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-typescript",children:'await exampleSelector.addExample({ input: "hand", output: "mano" });\n'})}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-typescript",children:'await exampleSelector.selectExamples({ input: "okay" });\n'})}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-text",children:'[ { input: "hand", output: "mano" } ]\n'})}),"\n",(0,s.jsx)(t.h2,{id:"use-in-a-prompt",children:"Use in a Prompt"}),"\n",(0,s.jsx)(t.p,{children:"We can now use this example selector in a prompt"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-typescript",children:'import { PromptTemplate, FewShotPromptTemplate } from "@langchain/core/prompts";\n\nconst examplePrompt = PromptTemplate.fromTemplate(\n  "Input: {input} -> Output: {output}"\n);\n'})}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-typescript",children:'const prompt = new FewShotPromptTemplate({\n  exampleSelector,\n  examplePrompt,\n  suffix: "Input: {input} -> Output:",\n  prefix: "Translate the following words from English to Italain:",\n  inputVariables: ["input"],\n});\n\nconsole.log(await prompt.format({ input: "word" }));\n'})}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-text",children:"Translate the following words from English to Italain:\n\nInput: hand -> Output: mano\n\nInput: word -> Output:\n"})}),"\n",(0,s.jsx)(t.h2,{id:"example-selector-types",children:"Example Selector Types"}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{children:"Name"}),(0,s.jsx)(t.th,{children:"Description"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"Similarity"}),(0,s.jsx)(t.td,{children:"Uses semantic similarity between inputs and examples to decide which examples to choose."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"Length"}),(0,s.jsx)(t.td,{children:"Selects examples based on how many can fit within a certain length"})]})]})]}),"\n",(0,s.jsx)(t.h2,{id:"next-steps",children:"Next steps"}),"\n",(0,s.jsx)(t.p,{children:"You\u2019ve now learned a bit about using example selectors to few shot LLMs."}),"\n",(0,s.jsx)(t.p,{children:"Next, check out some guides on some other techniques for selecting\nexamples:"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.a,{href:"../../docs/how_to/example_selectors_length_based",children:"How to select examples by\nlength"})}),"\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.a,{href:"../../docs/how_to/example_selectors_similarity",children:"How to select examples by\nsimilarity"})}),"\n"]})]})}function h(e={}){const{wrapper:t}={...(0,l.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}}}]);