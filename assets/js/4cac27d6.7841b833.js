(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[2395],{35573:(e,n,t)=>{"use strict";t.r(n),t.d(n,{assets:()=>u,contentTitle:()=>m,default:()=>C,frontMatter:()=>d,metadata:()=>p,toc:()=>f});var a=t(74848),o=t(28453),i=t(78847),s=t(64428),r=t(79380),c=t.n(r),h=t(24810),l=t.n(h);const d={},m="Cohere Rerank",p={id:"integrations/document_compressors/cohere_rerank",title:"Cohere Rerank",description:"Reranking documents can greatly improve any RAG application and document retrieval system.",source:"@site/docs/integrations/document_compressors/cohere_rerank.mdx",sourceDirName:"integrations/document_compressors",slug:"/integrations/document_compressors/cohere_rerank",permalink:"/docs/integrations/document_compressors/cohere_rerank",draft:!1,unlisted:!1,editUrl:"https://langchainjs-kr.site/docs/integrations/document_compressors/cohere_rerank.mdx",tags:[],version:"current",frontMatter:{}},u={},f=[{value:"Setup",id:"setup",level:2},...i.toc];function g(e){const n={code:"code",h1:"h1",h2:"h2",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.h1,{id:"cohere-rerank",children:"Cohere Rerank"}),"\n",(0,a.jsx)(n.p,{children:"Reranking documents can greatly improve any RAG application and document retrieval system."}),"\n",(0,a.jsx)(n.p,{children:"At a high level, a rerank API is a language model which analyzes documents and reorders them based on their relevance to a given query."}),"\n",(0,a.jsx)(n.p,{children:"Cohere offers an API for reranking documents. In this example we'll show you how to use it."}),"\n",(0,a.jsx)(n.h2,{id:"setup",children:"Setup"}),"\n","\n",(0,a.jsx)(i.default,{}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",metastring:"npm2yarn",children:"npm install @langchain/cohere\n"})}),"\n","\n","\n",(0,a.jsx)(s.A,{language:"typescript",children:c()}),"\n",(0,a.jsxs)(n.p,{children:["Here, we can see the ",(0,a.jsx)(n.code,{children:".rerank()"})," method returns just the index of the documents (matching the indexes of the input documents) and their relevancy scores."]}),"\n",(0,a.jsxs)(n.p,{children:["If we'd like to have the documents returned from the method itself, we can use the ",(0,a.jsx)(n.code,{children:".compressDocuments()"})," method."]}),"\n","\n",(0,a.jsx)(s.A,{language:"typescript",children:l()}),"\n",(0,a.jsxs)(n.p,{children:["From the results, we can see it returned the top 3 documents, and assigned a ",(0,a.jsx)(n.code,{children:"relevanceScore"})," to each."]}),"\n",(0,a.jsxs)(n.p,{children:["As expected, the document with the highest ",(0,a.jsx)(n.code,{children:"relevanceScore"})," is the one that references Washington, D.C., with a score of ",(0,a.jsx)(n.code,{children:"98.7%"}),"!"]})]})}function C(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(g,{...e})}):g(e)}},79380:e=>{e.exports={content:'import { CohereRerank } from "@langchain/cohere";\nimport { Document } from "@langchain/core/documents";\n\nconst query = "What is the capital of the United States?";\nconst docs = [\n  new Document({\n    pageContent:\n      "Carson City is the capital city of the American state of Nevada. At the 2010 United States Census, Carson City had a population of 55,274.",\n  }),\n  new Document({\n    pageContent:\n      "The Commonwealth of the Northern Mariana Islands is a group of islands in the Pacific Ocean that are a political division controlled by the United States. Its capital is Saipan.",\n  }),\n  new Document({\n    pageContent:\n      "Charlotte Amalie is the capital and largest city of the United States Virgin Islands. It has about 20,000 people. The city is on the island of Saint Thomas.",\n  }),\n  new Document({\n    pageContent:\n      "Washington, D.C. (also known as simply Washington or D.C., and officially as the District of Columbia) is the capital of the United States. It is a federal district. The President of the USA and many major national government offices are in the territory. This makes it the political center of the United States of America.",\n  }),\n  new Document({\n    pageContent:\n      "Capital punishment (the death penalty) has existed in the United States since before the United States was a country. As of 2017, capital punishment is legal in 30 of the 50 states. The federal government (including the United States military) also uses capital punishment.",\n  }),\n];\n\nconst cohereRerank = new CohereRerank({\n  apiKey: process.env.COHERE_API_KEY, // Default\n  model: "rerank-english-v2.0", // Default\n});\n\nconst rerankedDocuments = await cohereRerank.rerank(docs, query, {\n  topN: 5,\n});\n\nconsole.log(rerankedDocuments);\n/**\n[\n  { index: 3, relevanceScore: 0.9871293 },\n  { index: 1, relevanceScore: 0.29961726 },\n  { index: 4, relevanceScore: 0.27542195 },\n  { index: 0, relevanceScore: 0.08977329 },\n  { index: 2, relevanceScore: 0.041462272 }\n]\n */\n',imports:[{local:"CohereRerank",imported:"CohereRerank",source:"@langchain/cohere"},{local:"Document",imported:"Document",source:"@langchain/core/documents"}]}},24810:e=>{e.exports={content:'import { CohereRerank } from "@langchain/cohere";\nimport { Document } from "@langchain/core/documents";\n\nconst query = "What is the capital of the United States?";\nconst docs = [\n  new Document({\n    pageContent:\n      "Carson City is the capital city of the American state of Nevada. At the 2010 United States Census, Carson City had a population of 55,274.",\n  }),\n  new Document({\n    pageContent:\n      "The Commonwealth of the Northern Mariana Islands is a group of islands in the Pacific Ocean that are a political division controlled by the United States. Its capital is Saipan.",\n  }),\n  new Document({\n    pageContent:\n      "Charlotte Amalie is the capital and largest city of the United States Virgin Islands. It has about 20,000 people. The city is on the island of Saint Thomas.",\n  }),\n  new Document({\n    pageContent:\n      "Washington, D.C. (also known as simply Washington or D.C., and officially as the District of Columbia) is the capital of the United States. It is a federal district. The President of the USA and many major national government offices are in the territory. This makes it the political center of the United States of America.",\n  }),\n  new Document({\n    pageContent:\n      "Capital punishment (the death penalty) has existed in the United States since before the United States was a country. As of 2017, capital punishment is legal in 30 of the 50 states. The federal government (including the United States military) also uses capital punishment.",\n  }),\n];\n\nconst cohereRerank = new CohereRerank({\n  apiKey: process.env.COHERE_API_KEY, // Default\n  topN: 3, // Default\n  model: "rerank-english-v2.0", // Default\n});\n\nconst rerankedDocuments = await cohereRerank.compressDocuments(docs, query);\n\nconsole.log(rerankedDocuments);\n/**\n[\n  Document {\n    pageContent: \'Washington, D.C. (also known as simply Washington or D.C., and officially as the District of Columbia) is the capital of the United States. It is a federal district. The President of the USA and many major national government offices are in the territory. This makes it the political center of the United States of America.\',\n    metadata: { relevanceScore: 0.9871293 }\n  },\n  Document {\n    pageContent: \'The Commonwealth of the Northern Mariana Islands is a group of islands in the Pacific Ocean that are a political division controlled by the United States. Its capital is Saipan.\',\n    metadata: { relevanceScore: 0.29961726 }\n  },\n  Document {\n    pageContent: \'Capital punishment (the death penalty) has existed in the United States since before the United States was a country. As of 2017, capital punishment is legal in 30 of the 50 states. The federal government (including the United States military) also uses capital punishment.\',\n    metadata: { relevanceScore: 0.27542195 }\n  }\n]\n */\n',imports:[{local:"CohereRerank",imported:"CohereRerank",source:"@langchain/cohere"},{local:"Document",imported:"Document",source:"@langchain/core/documents"}]}}}]);