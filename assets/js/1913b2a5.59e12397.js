"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[9507],{69628:(t,e,a)=>{a.r(e),a.d(e,{assets:()=>l,contentTitle:()=>r,default:()=>c,frontMatter:()=>i,metadata:()=>s,toc:()=>p});var n=a(74848),o=a(28453);const i={sidebar_class_name:"hidden",pagination_prev:null,pagination_next:null},r="How to partially format prompt templates",s={id:"how_to/prompts_partial",title:"How to partially format prompt templates",description:"This guide assumes familiarity with the following concepts:",source:"@site/docs/how_to/prompts_partial.mdx",sourceDirName:"how_to",slug:"/how_to/prompts_partial",permalink:"/docs/how_to/prompts_partial",draft:!1,unlisted:!1,editUrl:"https://langchainjs-kr.site/docs/how_to/prompts_partial.mdx",tags:[],version:"current",frontMatter:{sidebar_class_name:"hidden",pagination_prev:null,pagination_next:null},sidebar:"tutorialSidebar"},l={},p=[{value:"Partial with strings",id:"partial-with-strings",level:2},{value:"Partial With Functions",id:"partial-with-functions",level:2},{value:"Next steps",id:"next-steps",level:2}];function h(t){const e={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,o.R)(),...t.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e.h1,{id:"how-to-partially-format-prompt-templates",children:"How to partially format prompt templates"}),"\n",(0,n.jsxs)(e.admonition,{title:"Prerequisites",type:"info",children:[(0,n.jsx)(e.p,{children:"This guide assumes familiarity with the following concepts:"}),(0,n.jsxs)(e.ul,{children:["\n",(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:"/docs/concepts/#prompt-templates",children:"Prompt templates"})}),"\n"]})]}),"\n",(0,n.jsx)(e.p,{children:'Like partially binding arguments to a function, it can make sense to "partial" a prompt template - e.g. pass in\na subset of the required values, as to create a new prompt template which expects only the remaining subset of values.'}),"\n",(0,n.jsx)(e.p,{children:"LangChain supports this in two ways:"}),"\n",(0,n.jsxs)(e.ol,{children:["\n",(0,n.jsx)(e.li,{children:"Partial formatting with string values."}),"\n",(0,n.jsx)(e.li,{children:"Partial formatting with functions that return string values."}),"\n"]}),"\n",(0,n.jsx)(e.p,{children:"In the examples below, we go over the motivations for both use cases as well as how to do it in LangChain."}),"\n",(0,n.jsx)(e.h2,{id:"partial-with-strings",children:"Partial with strings"}),"\n",(0,n.jsxs)(e.p,{children:["One common use case for wanting to partial a prompt template is if you get access to some of the variables in a\nprompt before others. For example, suppose you have a prompt template that requires two variables, ",(0,n.jsx)(e.code,{children:"foo"})," and ",(0,n.jsx)(e.code,{children:"baz"}),".\nIf you get the ",(0,n.jsx)(e.code,{children:"foo"})," value early on in your chain, but the ",(0,n.jsx)(e.code,{children:"baz"})," value later, it can be inconvenient to pass both variables all the way through the chain.\nInstead, you can partial the prompt template with the ",(0,n.jsx)(e.code,{children:"foo"})," value, and then pass the partialed prompt template along and just use that.\nBelow is an example of doing this:"]}),"\n",(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:"language-typescript",children:'import { PromptTemplate } from "langchain/prompts";\n\nconst prompt = new PromptTemplate({\n  template: "{foo}{bar}",\n  inputVariables: ["foo", "bar"],\n});\n\nconst partialPrompt = await prompt.partial({\n  foo: "foo",\n});\n\nconst formattedPrompt = await partialPrompt.format({\n  bar: "baz",\n});\n\nconsole.log(formattedPrompt);\n\n// foobaz\n'})}),"\n",(0,n.jsx)(e.p,{children:"You can also just initialize the prompt with the partialed variables."}),"\n",(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:"language-typescript",children:'const prompt = new PromptTemplate({\n  template: "{foo}{bar}",\n  inputVariables: ["bar"],\n  partialVariables: {\n    foo: "foo",\n  },\n});\n\nconst formattedPrompt = await prompt.format({\n  bar: "baz",\n});\n\nconsole.log(formattedPrompt);\n\n// foobaz\n'})}),"\n",(0,n.jsx)(e.h2,{id:"partial-with-functions",children:"Partial With Functions"}),"\n",(0,n.jsx)(e.p,{children:"You can also partial with a function. The use case for this is when you have a variable you know that you always want to fetch in a common way. A prime example of this is with date or time. Imagine you have a prompt which you always want to have the current date. You can't hard code it in the prompt, and passing it along with the other input variables can be tedious. In this case, it's very handy to be able to partial the prompt with a function that always returns the current date."}),"\n",(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:"language-typescript",children:'const getCurrentDate = () => {\n  return new Date().toISOString();\n};\n\nconst prompt = new PromptTemplate({\n  template: "Tell me a {adjective} joke about the day {date}",\n  inputVariables: ["adjective", "date"],\n});\n\nconst partialPrompt = await prompt.partial({\n  date: getCurrentDate,\n});\n\nconst formattedPrompt = await partialPrompt.format({\n  adjective: "funny",\n});\n\nconsole.log(formattedPrompt);\n\n// Tell me a funny joke about the day 2023-07-13T00:54:59.287Z\n'})}),"\n",(0,n.jsx)(e.p,{children:"You can also just initialize the prompt with the partialed variables:"}),"\n",(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:"language-typescript",children:'const prompt = new PromptTemplate({\n  template: "Tell me a {adjective} joke about the day {date}",\n  inputVariables: ["adjective"],\n  partialVariables: {\n    date: getCurrentDate,\n  },\n});\n\nconst formattedPrompt = await prompt.format({\n  adjective: "funny",\n});\n\nconsole.log(formattedPrompt);\n\n// Tell me a funny joke about the day 2023-07-13T00:54:59.287Z\n'})}),"\n",(0,n.jsx)(e.h2,{id:"next-steps",children:"Next steps"}),"\n",(0,n.jsx)(e.p,{children:"You've now learned how to partially apply variables to your prompt templates."}),"\n",(0,n.jsxs)(e.p,{children:["Next, check out the other how-to guides on prompt templates in this section, like ",(0,n.jsx)(e.a,{href:"/docs/how_to/few_shot_examples_chat",children:"adding few-shot examples to your prompt templates"}),"."]})]})}function c(t={}){const{wrapper:e}={...(0,o.R)(),...t.components};return e?(0,n.jsx)(e,{...t,children:(0,n.jsx)(h,{...t})}):h(t)}}}]);