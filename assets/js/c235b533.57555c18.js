"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[7206],{95529:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>r,default:()=>h,frontMatter:()=>o,metadata:()=>a,toc:()=>c});var s=n(74848),i=n(28453);const o={sidebar_class_name:"hidden",title:"How to split text by tokens"},r=void 0,a={id:"how_to/split_by_token",title:"How to split text by tokens",description:"This guide assumes familiarity with the following concepts:",source:"@site/docs/how_to/split_by_token.mdx",sourceDirName:"how_to",slug:"/how_to/split_by_token",permalink:"/docs/how_to/split_by_token",draft:!1,unlisted:!1,editUrl:"https://langchainjs-kr.site/docs/how_to/split_by_token.mdx",tags:[],version:"current",frontMatter:{sidebar_class_name:"hidden",title:"How to split text by tokens"},sidebar:"tutorialSidebar",previous:{title:"How to chain runnables",permalink:"/docs/how_to/sequence"},next:{title:"How to deal with large databases",permalink:"/docs/how_to/sql_large_db"}},l={},c=[{value:"<code>js-tiktoken</code>",id:"js-tiktoken",level:2},{value:"Next steps",id:"next-steps",level:2}];function d(e){const t={a:"a",admonition:"admonition",code:"code",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(t.admonition,{title:"Prerequisites",type:"info",children:[(0,s.jsx)(t.p,{children:"This guide assumes familiarity with the following concepts:"}),(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.a,{href:"../../docs/concepts#text-splitters",children:"Text splitters"})}),"\n"]})]}),"\n",(0,s.jsx)(t.p,{children:"Language models have a token limit. You should not exceed the token\nlimit. When you split your text into chunks it is therefore a good idea\nto count the number of tokens. There are many tokenizers. When you count\ntokens in your text you should use the same tokenizer as used in the\nlanguage model."}),"\n",(0,s.jsx)(t.h2,{id:"js-tiktoken",children:(0,s.jsx)(t.code,{children:"js-tiktoken"})}),"\n",(0,s.jsx)(t.admonition,{type:"note",children:(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.a,{href:"https://github.com/openai/js-tiktoken",children:"js-tiktoken"})," is a JavaScript\nversion of the ",(0,s.jsx)(t.code,{children:"BPE"})," tokenizer created by OpenAI."]})}),"\n",(0,s.jsxs)(t.p,{children:["We can use ",(0,s.jsx)(t.code,{children:"js-tiktoken"})," to estimate tokens used. It is tuned to OpenAI\nmodels."]}),"\n",(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsx)(t.li,{children:"How the text is split: by character passed in."}),"\n",(0,s.jsxs)(t.li,{children:["How the chunk size is measured: by the ",(0,s.jsx)(t.code,{children:"js-tiktoken"})," tokenizer."]}),"\n"]}),"\n",(0,s.jsxs)(t.p,{children:["You can use the\n",(0,s.jsx)(t.a,{href:"https://v02.api.js.langchain.com/classes/langchain_textsplitters.TokenTextSplitter.html",children:(0,s.jsx)(t.code,{children:"TokenTextSplitter"})}),"\nlike this:"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-typescript",children:'import { TokenTextSplitter } from "@langchain/textsplitters";\nimport * as fs from "node:fs";\n\n// Load an example document\nconst rawData = await fs.readFileSync(\n  "../../../../examples/state_of_the_union.txt"\n);\nconst stateOfTheUnion = rawData.toString();\n\nconst textSplitter = new TokenTextSplitter({\n  chunkSize: 10,\n  chunkOverlap: 0,\n});\n\nconst texts = await textSplitter.splitText(stateOfTheUnion);\n\nconsole.log(texts[0]);\n'})}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-text",children:"Madam Speaker, Madam Vice President, our\n"})}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Note:"})," Some written languages (e.g.\xa0Chinese and Japanese) have\ncharacters which encode to 2 or more tokens. Using the\n",(0,s.jsx)(t.code,{children:"TokenTextSplitter"})," directly can split the tokens for a character\nbetween two chunks causing malformed Unicode characters."]}),"\n",(0,s.jsx)(t.h2,{id:"next-steps",children:"Next steps"}),"\n",(0,s.jsx)(t.p,{children:"You\u2019ve now learned a method for splitting text based on token count."}),"\n",(0,s.jsxs)(t.p,{children:["Next, check out the ",(0,s.jsx)(t.a,{href:"../../docs/tutorials/rag",children:"full tutorial on retrieval-augmented\ngeneration"}),"."]})]})}function h(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}}}]);