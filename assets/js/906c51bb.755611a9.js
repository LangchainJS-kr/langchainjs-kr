(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[9471],{32153:(n,e,a)=>{"use strict";a.r(e),a.d(e,{assets:()=>m,contentTitle:()=>d,default:()=>h,frontMatter:()=>c,metadata:()=>p,toc:()=>g});var t=a(74848),s=a(28453),o=a(78847),r=a(64428),i=a(9866),l=a.n(i);const c={},d="AWS SageMakerEndpoint",p={id:"integrations/llms/aws_sagemaker",title:"AWS SageMakerEndpoint",description:"LangChain.js supports integration with AWS SageMaker-hosted endpoints. Check Amazon SageMaker JumpStart for a list of available models, and how to deploy your own.",source:"@site/docs/integrations/llms/aws_sagemaker.mdx",sourceDirName:"integrations/llms",slug:"/integrations/llms/aws_sagemaker",permalink:"/docs/integrations/llms/aws_sagemaker",draft:!1,unlisted:!1,editUrl:"https://langchainjs-kr.site/docs/integrations/llms/aws_sagemaker.mdx",tags:[],version:"current",frontMatter:{},sidebar:"integrations",previous:{title:"AlephAlpha",permalink:"/docs/integrations/llms/aleph_alpha"},next:{title:"Azure OpenAI",permalink:"/docs/integrations/llms/azure"}},m={},g=[{value:"Setup",id:"setup",level:2},...o.toc,{value:"Usage",id:"usage",level:2}];function u(n){const e={a:"a",code:"code",h1:"h1",h2:"h2",p:"p",pre:"pre",...(0,s.R)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.h1,{id:"aws-sagemakerendpoint",children:"AWS SageMakerEndpoint"}),"\n",(0,t.jsxs)(e.p,{children:["LangChain.js supports integration with AWS SageMaker-hosted endpoints. Check ",(0,t.jsx)(e.a,{href:"https://aws.amazon.com/sagemaker/jumpstart/",children:"Amazon SageMaker JumpStart"})," for a list of available models, and how to deploy your own."]}),"\n",(0,t.jsx)(e.h2,{id:"setup",children:"Setup"}),"\n",(0,t.jsx)(e.p,{children:"You'll need to install the official SageMaker SDK as a peer dependency:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",metastring:"npm2yarn",children:"npm install @aws-sdk/client-sagemaker-runtime\n"})}),"\n","\n",(0,t.jsx)(o.default,{}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",metastring:"npm2yarn",children:"npm install @langchain/community\n"})}),"\n",(0,t.jsx)(e.h2,{id:"usage",children:"Usage"}),"\n","\n",(0,t.jsx)(r.A,{language:"typescript",children:l()})]})}function h(n={}){const{wrapper:e}={...(0,s.R)(),...n.components};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(u,{...n})}):u(n)}},9866:n=>{n.exports={content:'import {\n  SageMakerEndpoint,\n  SageMakerLLMContentHandler,\n} from "@langchain/community/llms/sagemaker_endpoint";\n\ninterface ResponseJsonInterface {\n  generation: {\n    content: string;\n  };\n}\n\n// Custom for whatever model you\'ll be using\nclass LLama213BHandler implements SageMakerLLMContentHandler {\n  contentType = "application/json";\n\n  accepts = "application/json";\n\n  async transformInput(\n    prompt: string,\n    modelKwargs: Record<string, unknown>\n  ): Promise<Uint8Array> {\n    const payload = {\n      inputs: [[{ role: "user", content: prompt }]],\n      parameters: modelKwargs,\n    };\n\n    const stringifiedPayload = JSON.stringify(payload);\n\n    return new TextEncoder().encode(stringifiedPayload);\n  }\n\n  async transformOutput(output: Uint8Array): Promise<string> {\n    const response_json = JSON.parse(\n      new TextDecoder("utf-8").decode(output)\n    ) as ResponseJsonInterface[];\n    const content = response_json[0]?.generation.content ?? "";\n    return content;\n  }\n}\n\nconst contentHandler = new LLama213BHandler();\n\nconst model = new SageMakerEndpoint({\n  endpointName: "aws-llama-2-13b-chat",\n  modelKwargs: {\n    temperature: 0.5,\n    max_new_tokens: 700,\n    top_p: 0.9,\n  },\n  endpointKwargs: {\n    CustomAttributes: "accept_eula=true",\n  },\n  contentHandler,\n  clientOptions: {\n    region: "YOUR AWS ENDPOINT REGION",\n    credentials: {\n      accessKeyId: "YOUR AWS ACCESS ID",\n      secretAccessKey: "YOUR AWS SECRET ACCESS KEY",\n    },\n  },\n});\n\nconst res = await model.invoke(\n  "Hello, my name is John Doe, tell me a joke about llamas "\n);\n\nconsole.log(res);\n\n/*\n  [\n    {\n      content: "Hello, John Doe! Here\'s a llama joke for you:\n        Why did the llama become a gardener?\n        Because it was great at llama-scaping!"\n    }\n  ]\n */\n',imports:[{local:"SageMakerEndpoint",imported:"SageMakerEndpoint",source:"@langchain/community/llms/sagemaker_endpoint"},{local:"SageMakerLLMContentHandler",imported:"SageMakerLLMContentHandler",source:"@langchain/community/llms/sagemaker_endpoint"}]}}}]);